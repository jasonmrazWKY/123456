(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"1e38":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2f62");function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){i(t,e,n[e])})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={data:function(){return{token:"",fullHight:"",currentHight:"",showFlag:!0,rememberPsw:!0,uid:"",password:"",dk:""}},onShow:function(){var e=this;this.dk=this.websiteUrl,t.getStorage({key:"fwqsj",success:function(t){e.dk=t.data,console.log(t.data," at pages\\login\\login.vue:57")}}),this.showFlag=!1,t.onWindowResize(function(t){e.currentHight=t.size.windowHeight,Math.abs(e.fullHight-e.currentHight)>100?e.showFlag=!1:e.showFlag=!0});var n=null;plus.device.uuid;plus.runtime.getProperty(plus.runtime.appid,function(t){n=t.version,console.log("当前应用版本："+n," at pages\\login\\login.vue:76")}),t.request({url:"https://".concat(this.dk.split("/")[0],"/update/update.txt"),method:"GET",success:function(o){var a=o.data.split("\r\n"),i=a[0].split("=")[1];console.info(i," at pages\\login\\login.vue:87");var s="https://".concat(e.dk.split("/")[0],"/update/update.apk");n.trim()!=i.trim()&&t.showModal({title:"提示",content:"有新版本，请问是否下载",success:function(t){t.confirm&&plus.runtime.openURL(s)}})}})},onLoad:function(){var e=this;t.getSystemInfo({success:function(t){e.fullHight=t.windowHeight}}),this.dk=this.websiteUrl;var n=t.getStorageSync("uid"),o=t.getStorageSync("password");n&&o?(this.uid=n,this.password=o):(this.uid="",this.password=""),t.getStorage({key:"fwqsj",success:function(t){e.dk=t.data}})},methods:a({},(0,o.mapMutations)(["login"]),{bindLogin:function(){var e=this;this.token=this.Random(),""!=this.uid?""!=this.password?t.request({url:"https://".concat(this.dk,"/userLogin.aspx"),data:{uid:this.uid,password:this.password,token:this.token},method:"GET",dataType:"json",success:function(n){if(404!=n.statusCode){var o={};o.uid=n.data.uid,o.uname=n.data.uname,o.curr_worktype_bh=n.data.curr_worktype_bh,o.curr_worktype_name=n.data.curr_worktype_name,o.move_admin=n.data.move_admin,o.move_change=n.data.move_change,o.move_scan=n.data.move_scan,200!=n.statusCode?t.showToast({title:n.data.errMsg,icon:"none"}):0==n.data.state?t.showToast({title:"无此用户",icon:"none"}):1==n.data.state?t.showToast({title:"账号或密码不对",icon:"none"}):2==n.data.state&&(t.setStorage({key:"loginData",data:o}),t.setStorageSync("token",e.token),e.rememberPsw?(t.setStorageSync("uid",e.uid),t.setStorageSync("password",e.password)):(t.removeStorageSync("uid"),t.removeStorageSync("password")),t.offWindowResize(function(){}),t.switchTab({url:"/pages/index/index"}),e.test())}else t.showToast({title:"网络配置异常，请检查是否正确",icon:"none"})}}):t.showToast({title:"请输入密码",icon:"none"}):t.showToast({title:"请输入用户名",icon:"none"})},openRegister:function(){t.navigateTo({url:"../register/register"})},makePhoneCall:function(){t.makePhoneCall({phoneNumber:"0579-85161036"})},savaToken:function(){},test:function(){},Random:function(){var t=new Date,e=t.getTime()+Date.now().toString(36);return e}})};e.default=s}).call(this,n("6e42")["default"])},"793f":function(t,e,n){},a459:function(t,e,n){"use strict";n.r(e);var o=n("b9f4"),a=n("c7a3");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("fad3");var s=n("2877"),r=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=r.exports},b9f4:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.rememberPsw=!t.rememberPsw})},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},c7a3:function(t,e,n){"use strict";n.r(e);var o=n("1e38"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},fad3:function(t,e,n){"use strict";var o=n("793f"),a=n.n(o);a.a}},[["6a65","common/runtime","common/vendor"]]]);